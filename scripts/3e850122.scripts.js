"use strict";angular.module("poolewindApp",["firebase","ng-iscroll","ng-morris"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/2",{templateUrl:"views/root.html",controller:"RootCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("poolewindApp").controller("MainCtrl",["$scope","angularFire",function(e,t){var o="https://poolewind.firebaseio.com/weather",i=t(o,e,"live",{});e.weather={},e.pauseLiveUpdate=!1,e.$watch("live",function(){e.pauseLiveUpdate||angular.extend(e.weather,e.live)}),o="https://poolewind.firebaseio.com/history",i=t(o,e,"history",{}),e.showHistory=function(t){e.pauseLiveUpdate=!0,angular.extend(e.weather,e.history[t])},e.showLive=function(){e.pauseLiveUpdate=!1,angular.extend(e.weather,e.live)}}]),angular.module("poolewindApp").controller("RootCtrl",["$scope","angularFire","angularFireCollection",function(e,t,o){e.morrisConfig={xkey:"t",ykeys:["s"],labels:["Speed"]};var i="https://wind.firebaseio.com/poole/log",n="https://wind.firebaseio.com/poole/hlog";e.firehose=o(new Firebase(i).limit(60)),e.firehose2=o(new Firebase(n).limit(5))}]),angular.module("poolewindApp").directive("windBar",function(){return{template:'<div class="windbar-wrap" touch-mouse-start="startHandler()" touch-mouse-end="endHandler()"><div class="windbar k{{Math.round(data.AvgSpeed)}}" style="margin-top:{{barHeight-(data.AvgSpeed*(barHeight/limit))}}px;height:{{data.AvgSpeed*(barHeight/limit)}}px"><div class="detail mini_arrow_box">{{data.AvgSpeed}}</div></div><div class="timestamp k{{Math.round(data.AvgSpeed)}}">{{data.TimeStamp}}</div></div>',scope:{data:"=data",limit:"=limit",startHandler:"&touchMouseStart",endHandler:"&touchMouseEnd"},link:function(e,t){e.Math=window.Math,e.barHeight=t[0].children[0].children[0].clientHeight}}}),angular.module("ng-iscroll",[]).directive("ngIscroll",function(){return{replace:!1,restrict:"A",link:function(e,t,o){function i(){new iScroll(document.getElementById("wrapper"),{nap:!0,momentum:!0,hScrollbar:!1})}var n=5;""!==o.ngIscroll&&(n=o.ngIscroll),e.$watch(o.ngIscroll,function(){setTimeout(i,n)})}}}),angular.module("ng-morris",[]).directive("ngMorris",function(){return{restrict:"A",scope:{config:"=config",model:"=ngModel"},link:function(e,t){var o=angular.extend({element:t,data:e.model},e.config);Morris&&(e.graph=Morris.Line(o),e.$watchCollection("model",function(){var t=e.model;e.graph.setData(t)}))}}}),angular.module("poolewindApp").directive("touchMouseStart",function(){return function(e,t,o){t.bind("touchstart",function(){e.$apply(o.touchMouseStart)}),t.bind("mouseover",function(){e.$apply(o.touchMouseStart)})}}),angular.module("poolewindApp").directive("touchMouseEnd",function(){return function(e,t,o){t.bind("touchend",function(){e.$apply(o.touchMouseStart)}),t.bind("mouseout",function(){e.$apply(o.touchMouseEnd)})}});